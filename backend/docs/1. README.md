# 🤖 Sistema de Agentes Inteligentes con LangChain

Red de agentes de IA especializados que se comunican usando LangChain, con PostgreSQL, Redis y ChromaDB.

## 🏗️ Arquitectura

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   FastAPI       │    │  Coordinator     │    │  Specialist     │
│   Backend       │───▶│     Agent        │───▶│     Agents      │
│   (Port 8001)   │    │   (LangChain)    │    │   (LangChain)   │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌──────────────────┐
                       │   Google Gemini  │
                       │   (LangChain)    │
                       └──────────────────┘

┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   PostgreSQL    │    │      Redis       │    │    ChromaDB     │
│   (Port 5432)   │    │   (Port 6379)    │    │   (Port 8000)   │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

## 🛠️ Tecnologías

- **Backend**: FastAPI + Python 3.11
- **Agentes**: LangChain + Google Gemini
- **Base de Datos**: PostgreSQL
- **Cache**: Redis
- **Memoria Vectorial**: ChromaDB
- **Contenedores**: Docker + Docker Compose

## 🚀 Inicio Rápido

1. **Configurar credenciales**:
   ```bash
   cp env.example .env
   # Editar .env y agregar tu GOOGLE_API_KEY
   ```

2. **Levantar servicios**:
   ```bash
   ./start.sh
   ```

3. **Probar el sistema**:
   ```bash
   curl -X POST http://localhost:8001/agents/query \
     -H 'Content-Type: application/json' \
     -d '{"query": "¿Cuáles son las mejores prácticas para microservicios?"}'
   ```

## 📋 Endpoints Disponibles

### Agente Coordinador
- `POST /agents/query` - Procesar consulta con agente coordinador

### Agentes Especializados (Directos)
- `POST /agents/tech/query` - Consulta directa al agente técnico
- `POST /agents/business/query` - Consulta directa al agente de negocios
- `POST /agents/analysis/query` - Consulta directa al agente de análisis

### Información y Estado
- `GET /` - Health check general
- `GET /health` - Estado de servicios
- `GET /agents/health` - Health check de agentes
- `GET /agents/info` - Información de agentes disponibles
- `GET /docs` - Documentación automática de la API

## 🤖 Agentes Disponibles

### 1. **Agente Coordinador**
- Analiza consultas y determina qué especialista necesita
- Delega a agentes especializados
- Coordina respuestas finales

### 2. **Tech Specialist**
- Desarrollo de software y arquitectura
- Tecnologías y frameworks
- DevOps e infraestructura
- Bases de datos y APIs
- Seguridad y mejores prácticas

### 3. **Business Specialist**
- Estrategia de negocios y modelos de negocio
- Marketing y posicionamiento
- Análisis de mercado y competencia
- Pricing y monetización
- Ventas y crecimiento

### 4. **Analysis Specialist**
- Análisis estadístico y de datos
- Visualización y reporting
- Métricas y KPIs
- Interpretación de tendencias
- Insights basados en datos

## 🔄 Flujo de Trabajo

1. **Usuario envía consulta** → Endpoint `/agents/query`
2. **Agente Coordinador analiza** → Determina qué especialista necesita
3. **Delega a Especialista** → Tech, Business, o Analysis
4. **Coordina respuesta final** → Integra información y responde

## 📊 Servicios

- **API Gateway**: FastAPI en puerto 8001
- **Base de Datos**: PostgreSQL en puerto 5432
- **Cache**: Redis en puerto 6379
- **Vector DB**: ChromaDB en puerto 8000

## 🧪 Testing

```bash
# Probar diferentes tipos de consultas
curl -X POST http://localhost:8001/agents/query \
  -H 'Content-Type: application/json' \
  -d '{"query": "¿Cómo optimizar una base de datos PostgreSQL?"}'

curl -X POST http://localhost:8001/agents/query \
  -H 'Content-Type: application/json' \
  -d '{"query": "¿Cuál es la mejor estrategia de pricing para SaaS?"}'

curl -X POST http://localhost:8001/agents/query \
  -H 'Content-Type: application/json' \
  -d '{"query": "Analiza estos datos de ventas: Enero: 1000, Febrero: 1200, Marzo: 1100"}'
```

## 📊 Monitoreo

- **Logs**: `docker-compose logs -f backend`
- **Estado**: `docker-compose ps`
- **Documentación**: http://localhost:8001/docs

## 🎯 Próximos Pasos

- [ ] Integrar memoria vectorial con ChromaDB
- [ ] Implementar gestión de sesiones con Redis
- [ ] Agregar más agentes especializados
- [ ] Implementar herramientas externas
- [ ] Agregar autenticación y autorización

---

**¡Listo para usar!** 🎉 